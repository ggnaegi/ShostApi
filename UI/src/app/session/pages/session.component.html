<div class="session-floating-menu" *ngIf="isMobile && organisationData">
  <a
    *ngFor="let year of [2026, 2025, 2024]"
    routerLink="."
    class="session-menu-item"
    [class.active]="mobileSelectedYear === year"
    (click)="onMobileSelectedYear(year)">
    <span>{{ year }}</span>
  </a>
</div>


<div
  class="top-gallery-wrapper"
  fxLayout="row"
  fxFlexFill
  *ngIf="!isMobile && organisationData">
  <div fxFlex="100">
    <app-gallery-container
      [welcomeMessage]="organisationData.WelcomeText"
      (yearChanged)="onYearChanged($event)"
      *ngIf="organisationData">
    </app-gallery-container>
  </div>
</div>

<ng-container *ngIf="sessionData">
  <div class="floating-menu" *ngIf="isFloatingMenuVisible">
    <a
      routerLink="."
      fragment="concept"
      class="menu-item"
      [matTooltip]="isMobile ? 'Concept' : null">
      <i class="fa-solid fa-lightbulb menu-icon"></i>
      <span *ngIf="!isMobile">Concept</span>
    </a>

    <a
      routerLink="."
      fragment="conductor"
      class="menu-item"
      [matTooltip]="isMobile ? 'Directeur' : null">
      <i class="fa-solid fa-user-tie menu-icon"></i>
      <span *ngIf="!isMobile">Directeur</span>
    </a>

    <a
      routerLink="."
      fragment="soloists"
      class="menu-item"
      [matTooltip]="isMobile ? 'Solistes' : null">
      <i class="fa-solid fa-microphone menu-icon"></i>
      <span *ngIf="!isMobile">Solistes</span>
    </a>

    <a
      routerLink="."
      fragment="program"
      class="menu-item"
      [matTooltip]="isMobile ? 'Programme' : null">
      <i class="fa-solid fa-list menu-icon"></i>
      <span *ngIf="!isMobile">Programme</span>
    </a>

    <a
      routerLink="."
      fragment="musicians"
      class="menu-item"
      [matTooltip]="isMobile ? 'Musiciens' : null">
      <i class="fa-solid fa-music menu-icon"></i>
      <span *ngIf="!isMobile">Musiciens</span>
    </a>
  </div>

  <div
    class="main-content-wrapper"
    fxLayout="row"
    fxLayout.lt-md="column"
    fxLayoutAlign="start stretch"
    style="max-width: 100%; overflow-x: hidden;"
  >
    <!-- left -->
    <div fxFlex="20" fxFlex.lt-md="100" class="left-column">
      <!-- flyer -->
      <mat-card appearance="raised" class="left-column-card">
        <mat-card-header></mat-card-header>
        <mat-card-content>
          <app-image-with-loading
            [src]="'assets/' + sessionData.Picture"
            [alt]="''"
            [class]="'responsive-image'" />
        </mat-card-content>
      </mat-card>
      <mat-card appearance="outlined" class="right-column-card">
        <mat-card-header>
          <mat-card-title>Repr√©sentations</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div
            style="
              font-family: 'Avenir Next Light', sans-serif;
              line-height: 1.6;
              color: #333;
            ">
            <div *ngFor="let concert of sessionData.Concerts">
              <h3>
                <fa-icon [icon]="faCalendarAlt"></fa-icon>
                {{ concert.Date | date: 'dd.MM.yyyy HH:mm' }}
              </h3>
              <ul class="concert-details">
                <li>
                  <fa-icon [icon]="faBuilding"></fa-icon>
                  {{ concert.Venue }}
                </li>
                <li>
                  <fa-icon [icon]="faMapMarkerAlt"></fa-icon>
                  {{ concert.City }}
                </li>
                <li style="width: 100%">
                  <a
                    [href]="concert.Tickets"
                    target="_blank"
                    style="width: 100%; color: white">
                    <button
                      mat-raised-button
                      color="primary"
                      class="ticket-button"
                      style="width: 100%">
                      <fa-icon [icon]="faTicket" style="color: white"></fa-icon>
                      Billets
                    </button>
                  </a>
                </li>
              </ul>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>

    <!-- center -->
    <div fxFlex="53" fxFlex.lt-md="100" class="center-column">
      <!-- concept -->
      <mat-card id="concept" appearance="outlined" class="center-column-card">
        <mat-card-header>
          <mat-card-title><h1>Concept</h1></mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div
            style="
              font-family: 'Avenir Next Light', sans-serif;
              line-height: 1.6;
              color: #333;
            ">
            <div [innerHTML]="sessionData.Presentation"></div>
          </div>
        </mat-card-content>
      </mat-card>
      <!-- conductor -->
      <mat-card id="conductor" appearance="raised" class="center-column-card">
        <mat-card-header>
          <div mat-card-avatar>
            <img
              [src]="'assets/' + sessionData.Conductor?.Picture"
              [alt]="
                sessionData.Conductor?.FirstName +
                ' ' +
                sessionData.Conductor?.LastName
              "
              class="conductor-photo" />
          </div>
          <mat-card-title>{{
            sessionData.Conductor?.FirstName +
              ' ' +
              sessionData.Conductor?.LastName
          }}</mat-card-title>
          <mat-card-subtitle><h1>Directeur</h1></mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <div
            style="
              font-family: 'Avenir Next Light', sans-serif;
              line-height: 1.6;
              color: #333;
            ">
            <div [innerHTML]="sessionData.Conductor?.Presentation"></div>
          </div>
        </mat-card-content>
      </mat-card>
      <!-- soloists -->
      <div id="soloists" *ngFor="let soloist of sessionData.Soloists">
        <mat-card appearance="raised" class="center-column-card">
          <mat-card-header>
            <div mat-card-avatar>
              <img
                [src]="'assets/' + soloist.Picture"
                [alt]="soloist.FirstName + ' ' + soloist.LastName"
                class="conductor-photo" />
            </div>
            <mat-card-title>{{
              soloist.FirstName + ' ' + soloist.LastName
            }}</mat-card-title>
            <mat-card-subtitle
              ><h1>{{ soloist.Instrument }}</h1></mat-card-subtitle
            >
          </mat-card-header>
          <mat-card-content>
            <div
              style="
                font-family: 'Avenir Next Light', sans-serif;
                line-height: 1.6;
                color: #333;
              ">
              <div [innerHTML]="soloist.Presentation"></div>
            </div>
          </mat-card-content>
        </mat-card>
      </div>
    </div>

    <!-- right -->
    <div fxFlex="27" fxFlex.lt-md="100" class="right-column">
      <!-- program -->
      <mat-card id="program" appearance="outlined" class="right-column-card">
        <mat-card-header>
          <mat-card-title><h1>Programme</h1></mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div
            style="
              font-family: 'Avenir Next Light', sans-serif;
              line-height: 1.6;
              color: #333;
            ">
            <div [innerHTML]="sessionData.Program"></div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>

  <!-- musicians section -->
  <div
    id="musicians"
    class="main-content-wrapper"
    fxLayout="row"
    fxLayout.lt-md="column"
    fxLayoutAlign="center stretch"
    fxFlexFill>
    <div fxFlex="100" class="center-column">
      <mat-card appearance="outlined" class="center-column-card">
        <mat-card-header>
          <mat-card-title><h1>Musiciens</h1></mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div
            fxLayout="row"
            fxLayout.lt-md="column"
            fxLayoutAlign="start stretch"
            fxLayoutGap="16px">
            <div fxFlex="33.33" fxFlex.lt-md="100">
              <div class="text-content">
                <div *ngFor="let register of getRegisterGroups().left">
                  <h3>{{ register.RegisterName }}</h3>
                  <ul>
                    <li *ngFor="let musician of register.RegisterMusicians">
                      {{ musician.FirstName + ' ' + musician.LastName }}
                    </li>
                  </ul>
                </div>
              </div>
            </div>

            <div fxFlex="33.33" fxFlex.lt-md="100">
              <div class="text-content">
                <div *ngFor="let register of getRegisterGroups().center">
                  <h3>{{ register.RegisterName }}</h3>
                  <ul>
                    <li *ngFor="let musician of register.RegisterMusicians">
                      {{ musician.FirstName + ' ' + musician.LastName }}
                    </li>
                  </ul>
                </div>
              </div>
            </div>

            <div fxFlex="33.33" fxFlex.lt-md="100">
              <div class="text-content">
                <div *ngFor="let register of getRegisterGroups().right">
                  <h3>{{ register.RegisterName }}</h3>
                  <ul>
                    <li *ngFor="let musician of register.RegisterMusicians">
                      {{ musician.FirstName + ' ' + musician.LastName }}
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</ng-container>
